% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/late_rest.R
\name{dlate_method}
\alias{dlate_method}
\title{D-LATE estimation with cross-fitted score estimation}
\usage{
dlate_method(
  data,
  yname,
  treat,
  instrument,
  controls,
  n_groups = 10,
  pred_method = "Causal_Forest",
  p_th = 0.05,
  max_tries = 3,
  verbose = FALSE,
  iv_type = "base"
)
}
\arguments{
\item{data}{A data.frame containing the necessary variables to run the model.}

\item{yname}{Name of the dependent variable (character string)}

\item{treat}{Name of the treatment variable (character string)}

\item{instrument}{Name of the instrument (character string)}

\item{controls}{Controls. Either as a formula, eg ~ x1 + x2, or a vector of strings, eg c("x1", "x2")}

\item{n_groups}{Number of groups to split the predicted compliance scores into (default = 10)}

\item{pred_method}{Method for predicting compliance scores. Currently only "Causal_Forest" is supported}

\item{p_th}{Group selection threshold for the t-test (default = 0.05)}

\item{max_tries}{Maximum number of attempts to create a valid split with sufficient instrument variation (default = 3)}

\item{verbose}{Logical indicating whether to show warnings from t-statistic computations (default = FALSE)}

\item{iv_type}{Type of IV estimation to use. Options are "base" (default), "weighted", and "saturated"}
}
\value{
A fixest object containing the IV regression results
}
\description{
D-LATE estimation with cross-fitted score estimation
}
\details{
This function implements the D-LATE estimator with the following steps:
1. Splits the data into 3 folds
2. For each combination of folds:
   - Uses one fold to predict compliance scores and determine group thresholds
   - Uses the second fold to compute first-stage t-statistics for each group
   - Assigns these t-statistics to observations in the third fold
3. Performs final IV estimation using group selection based on t-statistics
}
\examples{
# Loading required packages
library(fixest)
library(grf)

# Generate a simulated dataset
data <- sim.data()

# Run standard IV
reg1 <- feols(data = data, y ~ 1 | d ~ z)

# Run D-LATE
reg2 <- dlate_method(data = data,
                    yname = "y",
                    treat = "d",
                    instrument = "z",
                    controls = ~x)

# Compare results
etable(reg1, reg2)
}
